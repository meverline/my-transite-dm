<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Quaternion.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">mathlib</a> &gt; <a href="index.source.html" class="el_package">me.math</a> &gt; <span class="el_source">Quaternion.java</span></div><h1>Quaternion.java</h1><pre class="source lang-java linenums">//	  CIRAS: Crime Information Retrieval and Analysis System
//    Copyright 2009 by Russ Brasser, Mark Everline and Eric Franklin
//
//    This program is free software: you can redistribute it and/or modify
//    it under the terms of the GNU General Public License as published by
//    the Free Software Foundation, either version 3 of the License, or
//    (at your option) any later version.
//
//    This program is distributed in the hope that it will be useful,
//    but WITHOUT ANY WARRANTY; without even the implied warranty of
//    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//    GNU General Public License for more details.
//
//    You should have received a copy of the GNU General Public License
//    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.

package me.math;


/*************************************************************************
 * Copyright 2007, Robert Sedgewick and Kevin Wayne.
 * Last updated: Tue Sep 29 16:17:41 EDT 2009. 
 * 
 *  Source Copied/Taken from
 *  http://www.cs.princeton.edu/introcs/32class/Quaternion.java.html
 *
 *  Compilation:  javac Quaternion.java
 *  Execution:    java Quaternion
 *
 *  Data type for quaternions.
 *
 *  http://mathworld.wolfram.com/Quaternion.html
 *
 *  The data type is &quot;immutable&quot; so once you create and initialize
 *  a Quaternion, you cannot change it.
 *
 *  Copied/Taken from
 *  http://www.cs.princeton.edu/introcs/32class/Quaternion.java.html
 *
 *  % java Quaternion
 *
 *************************************************************************/

public class Quaternion {

    private double x0, x1, x2, x3;

	// create a new object with the given components
<span class="fc" id="L49">	public Quaternion(double x0, double x1, double x2, double x3) {</span>
<span class="fc" id="L50">		this.x0 = x0;</span>
<span class="fc" id="L51">		this.x1 = x1;</span>
<span class="fc" id="L52">		this.x2 = x2;</span>
<span class="fc" id="L53">		this.x3 = x3;</span>
<span class="fc" id="L54">	}</span>

	// create a new object with the given components
<span class="fc" id="L57">	public Quaternion(double x0, VectorMath vec) {</span>
<span class="fc" id="L58">		this.x0 = x0;</span>
<span class="fc" id="L59">		this.x1 = vec.getX();</span>
<span class="fc" id="L60">		this.x2 = vec.getY();</span>
<span class="fc" id="L61">		this.x3 = vec.getZ();</span>
<span class="fc" id="L62">	}</span>

	protected void setX0(double x0) {
<span class="fc" id="L65">		this.x0 = x0;</span>
<span class="fc" id="L66">	}</span>

	protected void setX1(double x1) {
<span class="fc" id="L69">		this.x1 = x1;</span>
<span class="fc" id="L70">	}</span>

	protected void setX2(double x2) {
<span class="fc" id="L73">		this.x2 = x2;</span>
<span class="fc" id="L74">	}</span>

	protected void setX3(double x3) {
<span class="fc" id="L77">		this.x3 = x3;</span>
<span class="fc" id="L78">	}</span>

	public double getX0() {
<span class="fc" id="L81">		return x0;</span>
	}

	public double getX1() {
<span class="fc" id="L85">		return x1;</span>
	}

	public double getX2() {
<span class="fc" id="L89">		return x2;</span>
	}

	public double getX3() {
<span class="fc" id="L93">		return x3;</span>
	}

	// return a string representation of the invoking object
	public String toString() {
<span class="fc" id="L98">		return x0 + &quot; + &quot; + x1 + &quot;i + &quot; + x2 + &quot;j + &quot; + x3 + &quot;k&quot;;</span>
	}

	// return the quaternion norm
	public double norm() {
<span class="fc" id="L103">		return Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2 + x3 * x3);</span>
	}

	// return the quaternion conjugate
	public Quaternion conjugate() {
<span class="fc" id="L108">		return new Quaternion(x0, -x1, -x2, -x3);</span>
	}

	// return a new Quaternion whose value is (this + b)
	public Quaternion plus(Quaternion b) {
<span class="fc" id="L113">		Quaternion a = this;</span>
<span class="fc" id="L114">		return new Quaternion(a.x0 + b.x0, a.x1 + b.x1, a.x2 + b.x2, a.x3</span>
				+ b.x3);
	}

	// return a new Quaternion whose value is (this * b)
	public Quaternion times(Quaternion b) {
<span class="fc" id="L120">		Quaternion a = this;</span>
<span class="fc" id="L121">		double y0 = a.x0 * b.x0 - a.x1 * b.x1 - a.x2 * b.x2 - a.x3 * b.x3;</span>
<span class="fc" id="L122">		double y1 = a.x0 * b.x1 + a.x1 * b.x0 + a.x2 * b.x3 - a.x3 * b.x2;</span>
<span class="fc" id="L123">		double y2 = a.x0 * b.x2 - a.x1 * b.x3 + a.x2 * b.x0 + a.x3 * b.x1;</span>
<span class="fc" id="L124">		double y3 = a.x0 * b.x3 + a.x1 * b.x2 - a.x2 * b.x1 + a.x3 * b.x0;</span>
<span class="fc" id="L125">		return new Quaternion(y0, y1, y2, y3);</span>

	}

	// return a new Quaternion whose value is the inverse of this
	public Quaternion inverse() {
<span class="fc" id="L131">		double d = x0 * x0 + x1 * x1 + x2 * x2 + x3 * x3;</span>
<span class="fc" id="L132">		return new Quaternion(x0 / d, -x1 / d, -x2 / d, -x3 / d);</span>
	}

	// return a / b
	public Quaternion divides(Quaternion b) {
<span class="fc" id="L137">		Quaternion a = this;</span>
<span class="fc" id="L138">		return a.inverse().times(b);</span>
	}

	public Quaternion normalize() {
<span class="fc" id="L142">		double norm = norm();</span>
<span class="fc" id="L143">		return new Quaternion(getX0() / norm, getX1() / norm, getX2() / norm,</span>
<span class="fc" id="L144">				getX3() / norm);</span>
	}

	public VectorMath vectorPart() {
<span class="fc" id="L148">		return new VectorMath(getX1(), getX2(), getX3());</span>
	}

	public static Quaternion conjugate(Quaternion q) {
<span class="fc" id="L152">		return new Quaternion(q.getX0(), -q.getX1(), -q.getX2(), -q.getX3());</span>
	}

	public static VectorMath rotate(Quaternion rotationQuaternion,
			VectorMath vectorToRotate) {
<span class="fc" id="L157">		Quaternion v = rotationQuaternion.times(new Quaternion(0, vectorToRotate));</span>
<span class="fc" id="L158">		Quaternion r = v.times(Quaternion.conjugate(rotationQuaternion));</span>
<span class="fc" id="L159">		return r.vectorPart();</span>
	}

	public static Quaternion rotationAxis(VectorMath axis, double angleRadians) {
<span class="fc" id="L163">		Quaternion quat = new Quaternion(Math.cos(angleRadians / 2.0), axis</span>
<span class="fc" id="L164">				.unit().scalarMult(Math.sin(angleRadians / 2.0)));</span>
<span class="fc" id="L165">		quat.normalize();</span>
<span class="fc" id="L166">		return quat;</span>
	}

	public static Quaternion rotationAxis(VectorMath from, VectorMath to,
			double angleRadians) {
<span class="fc" id="L171">		VectorMath rotationAxis = from.cross(to);</span>
<span class="fc" id="L172">		return Quaternion.rotationAxis(rotationAxis, angleRadians);</span>
	}

	public static Quaternion rotationX(double angleRadians) {
<span class="fc" id="L176">		return rotationAxis(new VectorMath(1, 0, 0), angleRadians);</span>
	}

	public static Quaternion rotationY(double angleRadians) {
<span class="fc" id="L180">		return rotationAxis(new VectorMath(0, 1, 0), angleRadians);</span>
	}

	public static Quaternion rotationZ(double angleRadians) {
<span class="fc" id="L184">		return rotationAxis(new VectorMath(0, 0, 1), angleRadians);</span>
	}

}


</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>